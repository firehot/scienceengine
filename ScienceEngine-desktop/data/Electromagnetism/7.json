{name:"Electromagnetism",
level:7,
description:"Creating a DC  motor by using commutator",
components:[
{type:"Image",viewspec:"images/brush.png", x:323.0,y:233.0,originX:0.0,originY:0.0,width:48.0,height:16.0,visible:true,rotation:0.0,move:"None",bodytype:false},
{type:"HorseshoeMagnet", x:175, y:30.8,originX:175.0,originY:192.0,width:350.0,height:256.0,visible:true,rotation:0,move:"None",bodytype:false},
{type:"CurrentSource",x:342.6001,y:320.59995,originX:32.0,originY:64.0,width:64.0,height:128.0,visible:true,rotation:0.0,move:"None",bodytype:false},
{type:"CurrentCoil",x:282.86517,y:226.54425,originX:64.0,originY:16.0,width:128.0,height:32.0,visible:true,rotation:0.0,move:"Rotate",bodytype:true},
{type:"Dummy",x:370.0,y:313.0,originX:32.0,originY:32.0,width:0,height:0,visible:true,rotation:0.0},
{type: "Environment", move: "None", params:[{name:"AirPermittivity"},{name:"RoomTemperature"},{name:"EarthMagneticField"}]}], 
circuits:[["CurrentSource","CurrentCoil"]],
configs:[
{name:"HorseshoeMagnet.MagnetStrength", permitted:true, value:20},
{name:"HorseshoeMagnet.Flip", permitted:true},
{name:"CurrentSource.CurrentType", permitted:false, value:"DC"},
{name:"CurrentSource.CurrentFrequency", permitted:true, value:1.0},
{name:"CurrentSource.MaxCurrent", permitted:true, value:3.0},
{name:"CurrentSource.CurrentDirection", permitted:true, value:true},
{name:"CurrentCoil.CommutatorType", permitted:true, value:"Connector"},
{name:"CurrentCoil.RotationVelocity", permitted:false, value:2}
],
plan: [
  {type: "TutorGroup",
   group: "Guide",
   goal: "Make number of revolutions of the motor +5 by configuring only the magnet",
   success:200,
   timelimit: 300,
   configs:[{name: "CurrentCoil.CommutatorType", permitted: false, value:"Connector"},
            {name: "CurrentSource.CurrentDirection", permitted: false, value: false},
            {name:"CurrentCoil.RotationDataType", permitted:true},
   ],
   subgoals:[{type: "Subgoal",
          goal: "First, configure the current coil to see the number of revolutions", 
           postcondition: "CurrentCoil.RotationDataType = 'NumRevolutions'"},
          {type: "Subgoal",
          goal: "Flip the horseshoe magnet and see how it affects the rotation of the coil. Give the coil a starting push.", 
           postcondition: "CurrentCoil.AngularVelocity <> 0 and CurrentCoil.RotationData <> 0 and Count(HorseshoeMagnet.Flip) >= 2"},
          {type: "Subgoal",
          goal: "Flip the horseshoe magnet at different times.\nWhen should magnet flip be done to keep coil rotating in same direction?",
           when: "HorseshoeMagnet.Flip",
           postcondition: "(CurrentCoil.Angle / pi > 1.3 and CurrentCoil.Angle / pi < 1.7) or (CurrentCoil.Angle / pi > 0.3 and CurrentCoil.Angle / pi < 0.7)"},
          {type: "Subgoal",
          goal: "Make sure number of revolutions is increasing.",
           postcondition: "CurrentCoil.RotationData >= 5"},
   ]},
   {type: "TutorGroup",
    group: "Guide",
   goal: "Now, make number of revolutions of the motor +10 by configuring only the current source.",
   success:200,
   timelimit: 300,
   configs:[{name: "CurrentCoil.CommutatorType", permitted: false, value:"Connector"},
            {name: "HorseshoeMagnet.Flip", permitted: false, value: false},
            {name: "CurrentSource.CurrentDirection", permitted: true, value: false}
   ],
   subgoals:[{type: "Subgoal",
          goal: "Configured the current coil to see the number of revolutions", 
           postcondition: "CurrentCoil.RotationDataType = 'NumRevolutions'"},
          {type: "Subgoal",
          goal: "Change current direction and see how it affects the rotation of the coil. Give the coil a starting push.", 
           postcondition: "CurrentCoil.AngularVelocity <> 0 and CurrentCoil.RotationData <> 0 and Count(CurrentSource.CurrentDirection) >= 2"},
          {type: "Subgoal",
          goal: "Change current direction at different times.\nWhen should current direction be changed to keep coil rotating in same direction?",
           when: "CurrentCoil.CurrentDirection",
           postcondition: "(CurrentCoil.Angle / pi > 1.3 and CurrentCoil.Angle / pi < 1.7) or (CurrentCoil.Angle / pi > 0.3 and CurrentCoil.Angle / pi < 0.7)"},
          {type: "Subgoal",
          goal: "Make sure number of revolutions increasing",
           postcondition: "CurrentCoil.RotationData >= 10"}
   ]},
   {type: "TutorGroup",
    group:"Challenge",
   goal: "Understand how a DC Motor works",
   subgoals:[
       {type:"ParameterProber",
                 goal:"Click on ? and select correct direction of rotation of motor.",
                 hints:["Use Fleming's Left hand rule"],
                 resultType:"Spin",
                 success: 100,
                 failure: 50,
                 parameter:"HorseshoeMagnet.Flip",
                 result:"CurrentSource.CurrentDirection = HorseshoeMagnet.Flip"},
       {type: "ParameterProber",
                 goal:"Should MaxCurrent be increased or decreased to make the motor run faster?\nSelect X if MaxCurrent does not affect motor.",
                 success: 100,
                 failure: 50,
                 parameter:"CurrentSource.MaxCurrent", 
                 resultType:"Direct"},
       {type:"ParameterProber",
                 goal:"Click on ? and select correct direction of rotation of motor.",
                 hints:["Use Fleming's Left hand rule"],
                 resultType:"Spin",
                 success: 100,
                 failure: 50,
                 parameter:"CurrentSource.CurrentDirection",
                 result:"CurrentSource.CurrentDirection = HorseshoeMagnet.Flip"},
       {type: "Abstractor", 
            goal:"Select variables which affect the rotation speed of the motor and press Done.\nYou have 3 tries.",
            configs: [
            {name:"Environment.RoomTemperature", permitted: false},
            {name:"CurrentCoil.RotationDataType",permitted: false},
            {name:"CurrentCoil.CommutatorType",permitted:false},
            ],
            parameters: ["HorseshoeMagnet.MagnetStrength", "CurrentSource.MaxCurrent"],
            success: 5000
            },
       ]},
   ],
}